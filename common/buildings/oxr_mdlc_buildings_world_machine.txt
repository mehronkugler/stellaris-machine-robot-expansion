@buildings_t1 = 1
@buildings_t2 = 2
@buildings_t3 = 3
@buildings_t4 = 4

@tier_2_capital_defense_armies = 4
@tier_3_capital_defense_armies = 8
@tier_4_capital_defense_armies = 16
@tier_5_capital_defense_armies = 24

@oxr_capital_upgrade_t2_districts_num = 10
@oxr_capital_upgrade_t3_districts_num = 18
@oxr_capital_upgrade_t4_districts_num = 25
@oxr_capital_upgrade_t5_districts_num = 32

#### AMENITY ####


#### ASTRAL ####
oxr_mdlc_world_machines_building_auto_astral_1 = {
	base_cap_amount = 1
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_astral_siphon
		BUILD_TIME = @b1_time
		MINERALS_COST = @b1_minerals
		ENERGY_UPKEEP = @b1_upkeep
		BUILDING_TIER = 1
		MAX_THREADS_ADD = 100
	}

	upgrades = {
		oxr_mdlc_world_machines_building_auto_astral_2
	}
}

oxr_mdlc_world_machines_building_auto_astral_2 = {
	can_build = no
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_astral_siphon
		BUILD_TIME = @b2_time
		MINERALS_COST = @b3_minerals
		ENERGY_UPKEEP = @b3_upkeep
		BUILDING_TIER = 2
		MAX_THREADS_ADD = 200
	}

	upgrades = {
		oxr_mdlc_world_machines_building_auto_astral_3
	}
}

oxr_mdlc_world_machines_building_auto_astral_3 = {
	can_build = no
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_astral_siphon
		BUILD_TIME = @b3_time
		MINERALS_COST = @b3_minerals
		ENERGY_UPKEEP = @b3_upkeep
		BUILDING_TIER = 3
		MAX_THREADS_ADD = 300
	}
}


#### GOVERNMENT ####
oxr_mdlc_world_machines_building_auto_stabilizer_1 = {
	base_buildtime = @b1_time

	category = government

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_stability
		BUILD_COST = @b1_minerals
		RARE_COST = 0
		UPKEEP_ENERGY = 2
		RARE_UPKEEP = 0
		PRODUCES_UNITY = 2  # mult x 2
		UPKEEP_ENERGY = 2  # mult x 2
		REDUCE_CRIME = -50
		REDUCE_CRIME_CAMPAIGN = -10
		STABILITY_ADD = 5
	}

	prerequisites = {
		"tech_planetary_government"
	}

	upgrades = {
		oxr_mdlc_world_machines_building_auto_stabilizer_2
	}
}

oxr_mdlc_world_machines_building_auto_stabilizer_2 = {
	base_buildtime = @b2_time

	category = government
	can_build = no

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_stability
		BUILD_COST = @b2_minerals
		RARE_COST = @b2_rare_cost
		UPKEEP_ENERGY = @b1_upkeep
		RARE_UPKEEP = @b2_rare_upkeep
		PRODUCES_UNITY = 5  # mult x 5
		UPKEEP_ENERGY = 10  # mult x 15
		REDUCE_CRIME = -125
		REDUCE_CRIME_CAMPAIGN = -50
		STABILITY_ADD = 5
	}

	prerequisites = {
		"tech_colonial_centralization"
	}

}

### CAPITAL BUILDINGS ###

# Technically this is T2
oxr_mdlc_world_machines_building_auto_capital = {
	# resources
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_capital
		COST = @b2_minerals
		UPKEEP = @b2_upkeep
		BUILD_TIME = @b2_time
		HOUSING_ADD = 3
		AMENITIES_ADD = 3
		HIBERNATION_JOBS = 3
		MAX_BUILDINGS_ADD = 0
		DEFENSE_ARMIES = 0
		# allow upgrade if >= this many districts
		# 0 in this instance
		REQ_MIN_NUM_DISTRICTS = 0
	}

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	convert_to = {
		building_hive_capital
		building_colony_shelter
		building_ancient_control_center
		building_ancient_palace
		building_machine_capital_nanotech
	}

	prerequisites = { "tech_planetary_government" }

	upgrades = {
		oxr_mdlc_world_machines_building_auto_capital_upgraded
	}
}
# T3
oxr_mdlc_world_machines_building_auto_capital_upgraded = {
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_capital
		COST = @b2_minerals
		UPKEEP = @b2_upkeep
		BUILD_TIME = @b2_time
		HOUSING_ADD = 4
		AMENITIES_ADD = 4
		HIBERNATION_JOBS = 4
		MAX_BUILDINGS_ADD = @buildings_t2
		DEFENSE_ARMIES = @tier_2_capital_defense_armies
		# allow upgrade if >= this many districts
		REQ_MIN_NUM_DISTRICTS = @oxr_capital_upgrade_t2_districts_num
	}

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	convert_to = {
		building_hive_capital
		building_colony_shelter
		building_ancient_control_center
		building_ancient_palace
		building_machine_capital_nanotech
	}

	prerequisites = {
		"tech_planetary_government"
	}

	# boost production w/ capital productivity tech
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t2

	upgrades = {
		oxr_mdlc_world_machines_building_auto_capital_major_upgraded
	}
}
# T4
oxr_mdlc_world_machines_building_auto_capital_major_upgraded = {
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_capital
		COST = @b3_minerals
		UPKEEP = @b3_upkeep
		BUILD_TIME = @b3_time
		HOUSING_ADD = 5
		AMENITIES_ADD = 5
		HIBERNATION_JOBS = 5
		MAX_BUILDINGS_ADD = @buildings_t3
		DEFENSE_ARMIES = @tier_3_capital_defense_armies
		# allow upgrade if >= this many districts
		REQ_MIN_NUM_DISTRICTS = @oxr_capital_upgrade_t3_districts_num
	}

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	convert_to = {
		building_hive_major_capital
		building_major_capital
		building_ancient_control_center
		building_ancient_palace
		building_machine_major_capital_nanotech
	}

	prerequisites = {
		"tech_colonial_centralization"
	}

	# boost production w/ capital productivity tech
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t2
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t3

	upgrades = {
		"oxr_mdlc_world_machines_building_auto_capital_fully_upgraded"
	}
}
# T5
oxr_mdlc_world_machines_building_auto_capital_fully_upgraded = {
	# resources
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_capital
		COST = @b4_minerals
		UPKEEP = @b4_upkeep
		BUILD_TIME = @b4_time
		HOUSING_ADD = 6
		AMENITIES_ADD = 6
		HIBERNATION_JOBS = 6
		MAX_BUILDINGS_ADD = @buildings_t4
		DEFENSE_ARMIES = @tier_5_capital_defense_armies
		# allow upgrade if >= this many districts
		REQ_MIN_NUM_DISTRICTS = @oxr_capital_upgrade_t4_districts_num
	}

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	convert_to = {
		building_hive_major_capital
		building_major_capital
		building_machine_major_capital
		building_ancient_control_center
		building_ancient_palace
		building_machine_system_capital_nanotech
	}

	prerequisites = { "tech_galactic_administration" }

	# boost production w/ capital productivity tech
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t2
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t3
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t4

	upgrades = {
		"oxr_mdlc_world_machines_building_auto_imperial_capital"
	}
}

# Imperial Capital - T6
oxr_mdlc_world_machines_building_auto_imperial_capital = {
	# not including this script bc potential is different
	# inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	# resources
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_capital
		COST = @b4_minerals
		UPKEEP = @b4_upkeep
		BUILD_TIME = @b4_time
		HOUSING_ADD = 6
		AMENITIES_ADD = 6
		HIBERNATION_JOBS = 6
		MAX_BUILDINGS_ADD = @buildings_t4
		DEFENSE_ARMIES = @tier_5_capital_defense_armies
		# allow upgrade if >= this many districts
		REQ_MIN_NUM_DISTRICTS = @oxr_capital_upgrade_t5_districts_num
	}

	potential = {
		exists = owner
		owner = {
			has_origin = oxr_mdlc_origin_world_machine_awakened
			# oxr_mdlc_origin_world_machine_feature_enabled = yes
			is_galactic_emperor = yes
		}
	}
	show_tech_unlock_if = {
		has_origin = oxr_mdlc_origin_world_machine_awakened
	}

	convert_to = {
		building_hive_major_capital
		building_machine_system_capital
		building_system_capital
		building_hab_major_capital
		building_ancient_control_center
		building_ancient_palace
	}

	prerequisites = { }

	# boost production w/ capital productivity tech
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t2
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t3
	inline_script = planet/buildings/auto/oxr_mdlc_capital_t4

}

#### MANUFACTURING ###

# Forge booster
oxr_mdlc_world_machines_building_auto_forge_1 = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	category = manufacturing

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	inline_script = planet/buildings/auto/oxr_destroy

	resources = {
		category = oxr_mdlc_world_machines_foundry_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
		inline_script = planet/buildings/auto/oxr_mdlc_foundry_produces
	}

	upgrades = {
		oxr_mdlc_world_machines_building_auto_forge_2
	}

	prerequisites = {
		tech_basic_industry
	}
}

oxr_mdlc_world_machines_building_auto_forge_2 = {
	base_buildtime = @b2_time
	can_build = no
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	allow = {
		# has_upgraded_capital = yes
		oxr_mdlc_has_upgraded_capital = yes
	}
	inline_script = planet/buildings/auto/oxr_destroy

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_foundry
		COST = @b2_minerals
		RARE_COST = @b3_rare_cost
		UPKEEP = @b2_upkeep
		RARE_UKPEEP = @b3_rare_upkeep
		MODIFIER_ALLOYS_PRODUCES_ADD = 1
		MODIFIER_UPKEEP_ADD = 2  # MINERALS
		MODIFIER_CATALYTIC_ALLOYS_PRODUCES_ADD = 1.25
		MODIFIER_CATALYTIC_UPKEEP_ADD = 3
		# is_ringworld stuff D:
		# RING_COST = 0
		# RING_RARE_COST = 0
		# RING_UPKEEP = 0
		# RING_RARE_UPKEEP = 0
		# RING_MODIFIER_ALLOYS_PRODUCES_ADD = 1
		# RING_MODIFIER_UPKEEP_ADD = 2
		# RING_MODIFIER_CATALYTIC_ALLOYS_PRODUCES_ADD = 1.25
		# RING_MODIFIER_CATALYTIC_UPKEEP_ADD = 3
	}

	upgrades = {
		oxr_mdlc_world_machines_building_auto_forge_3
	}

	prerequisites = {
		tech_alloys_1
	}
}

oxr_mdlc_world_machines_building_auto_forge_3 = {
	base_buildtime = @b3_time
	can_build = no
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_foundry
		COST = @b3_minerals
		RARE_COST = @b4_rare_cost
		UPKEEP = @b3_upkeep
		RARE_UKPEEP = @b4_rare_upkeep
		MODIFIER_ALLOYS_PRODUCES_ADD = 2
		MODIFIER_UPKEEP_ADD = 4  # MINERALS
		MODIFIER_CATALYTIC_ALLOYS_PRODUCES_ADD = 2.5
		MODIFIER_CATALYTIC_UPKEEP_ADD = 6
		# has_ringworld_boost D:
		# RING_COST = 1500
		# RING_RARE_COST = 600
		# RING_UPKEEP = 15
		# RING_RARE_UPKEEP = 8
		# RING_MODIFIER_ALLOYS_PRODUCES_ADD = 1
		# RING_MODIFIER_UPKEEP_ADD = 2
		# RING_MODIFIER_CATALYTIC_ALLOYS_PRODUCES_ADD = 1.25
		# RING_MODIFIER_CATALYTIC_UPKEEP_ADD = 3
	}
	# inline_script = {
	# 	script = jobs/foundry_add
	# 	AMOUNT = @b1_jobs
	# }

	allow = {
		oxr_mdlc_has_major_upgraded_capital = yes
	}
	# boom if no ap or wm origin
	inline_script = planet/buildings/auto/oxr_destroy

	prerequisites = {
		tech_alloys_2
	}
}

# New building - Forge w/ no boost

# Factories

# I decided not to implement output_add to this for now
# so to make up for that, boost base output by 20% , which is what the factory does
# it boosts artisan output by 20% essentially
# .. let's make it 50%
# goods_produces_add is 2 for T3 and 1 for T2
# minerals_upkeep_add is 2 for T3 and 1 for T2
# to balance this (+2 goods needs +2 minerals)
oxr_mdlc_world_machines_building_auto_factory_1 = {
	base_buildtime = @b1_time
	base_cap_amount = 1

	potential = {
		exists = owner
		is_planet_world_machine = yes
		owner = {
			country_uses_consumer_goods = yes
			OR = {
				has_origin = oxr_mdlc_origin_world_machine_awakened
				has_ascension_perk = xvcv_mdlc_ap_world_machines
			}
		}
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		# OR = {
		# 	owner = {
		# 		is_ai = no
		# 	}
		# 	and = {
		# 		has_any_industry_district = yes
		# 		owner = {
		# 			should_ai_focus_on_trade = no
		# 		}
		# 	}
		# }
	}
	show_tech_unlock_if = {
		has_origin = oxr_mdlc_origin_world_machine_awakened
	}

	inline_script = planet/buildings/auto/oxr_destroy

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_factory
		MINERALS_COST = @b1_minerals
		ENERGY_UPKEEP = @b1_upkeep
		RARE_UPKEEP = 0
		PRODUCES_GOODS = 30   # 20 * 1.5
		UPKEEP_MINERALS = 30  # 20 * 1.5
	}

	prerequisites = {
		"tech_basic_industry"
	}

	upgrades = {
		oxr_mdlc_world_machines_building_auto_factory_2
	}
}
# T2
oxr_mdlc_world_machines_building_auto_factory_2 = {
	base_buildtime = @b2_time
	can_build = no

	allow = {
		OR = {
			has_upgraded_capital = yes
			oxr_mdlc_has_upgraded_capital = yes
		}
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				has_origin = oxr_mdlc_origin_world_machine_awakened
				has_ascension_perk = xvcv_mdlc_ap_world_machines
			}
			country_uses_consumer_goods = yes
		}
		is_planet_world_machine = yes
	}
	show_tech_unlock_if = {
		OR = {
			has_origin = oxr_mdlc_origin_world_machine_awakened
			has_ascension_perk = xvcv_mdlc_ap_world_machines
		}
	}

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_factory
		MINERALS_COST = @b2_minerals
		RARE_COST = @b3_rare_cost
		RING_MINERALS_COST = 0
		RING_RARE_COST = 0
		ENERGY_UPKEEP = @b2_upkeep
		RARE_UPKEEP = @b3_rare_upkeep
		PRODUCES_GOODS = 45  # 30 * 1.5
		UPKEEP_MINERALS = 45 # 30 * 1.5
	}

	prerequisites = {
		"tech_luxuries_1"
	}

	upgrades = {
		"oxr_mdlc_world_machines_building_auto_factory_3"
	}
}
# T3
oxr_mdlc_world_machines_building_auto_factory_3 = {
	base_buildtime = @b3_time
	can_build = no

	allow = {
		OR = {
			has_major_upgraded_capital = yes
			oxr_mdlc_has_upgraded_capital = yes
		}
	}

	potential = {
		exists = owner
		owner = {
			OR = {
				has_origin = oxr_mdlc_origin_world_machine_awakened
				has_ascension_perk = xvcv_mdlc_ap_world_machines
			}
			country_uses_consumer_goods = yes
		}
		is_planet_world_machine = yes
	}
	show_tech_unlock_if = {
		OR = {
			has_origin = oxr_mdlc_origin_world_machine_awakened
			has_ascension_perk = xvcv_mdlc_ap_world_machines
		}
	}

	# I'd rather not deal with extra costs on ringworlds
	# THIS DOESNT BOOST DISTRICT OUTPUT ..
	# MY BRAIN HURTS
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_factory
		MINERALS_COST = @b3_minerals
		RARE_COST = @b4_rare_cost
		ENERGY_UPKEEP = @b3_upkeep
		RARE_UPKEEP = @b4_rare_upkeep
		PRODUCES_GOODS = 60  # 40 * 1.5
		UPKEEP_MINERALS = 60 # 40 * 1.5
	}

	prerequisites = {
		"tech_luxuries_2"
	}
}


#### MILITARY ####
# MILITARY T1
oxr_mdlc_world_machines_building_maintenance_legion = {
	category = army
	can_be_ruined = no
	exempt_from_ai_planet_specialization = no

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_army
		BUILD_TIME = @b1_time
		MINERALS_COST = @b1_minerals
		DEFENSE_ARMIES = 3
		NAVAL_CAP_ADD = 4
		RARE_COST = 0
		ENERGY_UPKEEP = 1
		RARE_UPKEEP = 0
	}

	prerequisites = {
		"tech_planetary_defenses"
		"oxr_mdlc_tech_world_machines_unlocked"
	}

	upgrades = {
		oxr_mdlc_world_machines_building_maintenance_legion_2
	}
}
# MILITARY T2
oxr_mdlc_world_machines_building_maintenance_legion_2 = {
	can_build = no
	planetary_ftl_inhibitor = yes
	can_be_ruined = no
	category = army

	allow = { has_upgraded_capital = yes }
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_army
		BUILD_TIME = @b1_time
		MINERALS_COST = @b2_minerals
		RARE_COST = @b2_rare_cost
		ENERGY_UPKEEP = 1
		RARE_UPKEEP = @b2_rare_upkeep
		DEFENSE_ARMIES = 6
		NAVAL_CAP_ADD = 8
	}

	prerequisites = {
		"tech_global_defense_grid"
	}
}


#### RESEARCH ####
# RESEARCH T1
oxr_mdlc_world_machines_building_fractal_sanitizer = {
	base_buildtime = @b1_time

	exempt_from_ai_planet_specialization = no

	category = research
	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# has_modifier = crucible_colony
		}
	}

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_research
		OUTPUT = 6
		UPKEEP = 10
		COST = @b1_minerals
		RARE = 0
	}

	upgrades = {
		"oxr_mdlc_world_machines_building_fractal_sanitizer_2"
	}

	prerequisites = {
		"tech_basic_science_lab_1"
		"oxr_mdlc_tech_world_machines_unlocked"
	}

}
# RESEARCH T2
oxr_mdlc_world_machines_building_fractal_sanitizer_2 = {
	base_buildtime = @b2_time
	can_build = no

	exempt_from_ai_planet_specialization = no

	category = research

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# has_modifier = crucible_colony
		}
	}

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_research
		OUTPUT = 12
		UPKEEP = 14
		COST = @b2_minerals
		RARE = 0
	}
	upgrades = {
		oxr_mdlc_world_machines_building_fractal_sanitizer_3
	}
	prerequisites = {
		"tech_basic_science_lab_2"
		"oxr_mdlc_tech_world_machines_unlocked"
	}

}
# RESEARCH T3
oxr_mdlc_world_machines_building_fractal_sanitizer_3 = {
	base_buildtime = @b3_time
	can_build = no

	exempt_from_ai_planet_specialization = no

	category = research

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# has_modifier = crucible_colony
		}
	}

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_research
		OUTPUT = 18
		UPKEEP = 21
		COST = @b3_minerals
		RARE = 1
	}
	upgrades = {
		oxr_mdlc_world_machines_building_fractal_sanitizer_4
	}
	prerequisites = {
		"tech_basic_science_lab_3"
		"oxr_mdlc_tech_world_machines_unlocked"
	}

}
# RESEARCH T4
oxr_mdlc_world_machines_building_fractal_sanitizer_4 = {
	base_buildtime = @b4_time
	can_build = no

	exempt_from_ai_planet_specialization = no

	category = research

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# has_modifier = crucible_colony
		}
	}

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_research
		OUTPUT = 24
		UPKEEP = 32
		COST = @b4_minerals
		RARE = 1.5
	}

	prerequisites = {
		"tech_zero_point_power"
		"oxr_mdlc_tech_world_machines_unlocked"
	}

}

#### RESOURCE ####
# Replace some vanilla buildings with world-machine versions
oxr_mdlc_world_machines_auto_farm_1 = {
	can_build = yes
	inline_script = planet/buildings/oxr_sort_important
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_auto_farm
		FOOD = 10
		BUILD_COST = @b0_minerals
		UPKEEP = 0.5
		# AI_FOOD = 10
		BUILD_TIME = @b0_time
	}
	prerequisites = {
		"tech_industrial_farming"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_farm_2
	}
}
oxr_mdlc_world_machines_auto_farm_2 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_auto_farm
		FOOD = 20
		BUILD_COST = @b1_minerals
		UPKEEP = @b1_upkeep
		BUILD_TIME = @b1_time
	}
	prerequisites = {
		"tech_eco_simulation"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_farm_3
	}
}
oxr_mdlc_world_machines_auto_farm_3 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_auto_farm
		FOOD = 30
		BUILD_COST = @b2_minerals
		UPKEEP = @b2_upkeep
		BUILD_TIME = @b2_time
	}
	prerequisites = {
		"tech_gene_crops"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_farm_4
	}
}
oxr_mdlc_world_machines_auto_farm_4 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_auto_farm
		FOOD = 40
		BUILD_COST = @b3_minerals
		UPKEEP = @b3_upkeep
		BUILD_TIME = @b2_time
	}
	prerequisites = {
		"tech_nano_vitality_crops"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_farm_5
	}
	allow = {
		oxr_mdlc_has_upgraded_capital = yes
		# owner = {
			# has_ascension_perk = oxr_mdlc_ap_fractal_production_automation
		# }
	}
}
oxr_mdlc_world_machines_auto_farm_5 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_auto_farm
		FOOD = 50
		BUILD_COST = @b3_minerals
		UPKEEP = @b4_upkeep
		BUILD_TIME = @b3_time
	}
	prerequisites = {
		"tech_food_processing_2"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	allow = {
		oxr_mdlc_has_upgraded_capital = yes
		# owner = {
			# has_ascension_perk = oxr_mdlc_ap_fractal_production_automation
		# }
	}
}
# Mining
oxr_mdlc_world_machines_building_auto_mining_support = {
	can_build = yes
	inline_script = planet/buildings/oxr_sort_important
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_mining_boost
		BUILD_TIME = @b1_time
		COST = 200
		UPKEEP = 2
		COST_MOTES = 0
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		tech_mineral_purification_1
	}
	upgrades = {
		oxr_mdlc_world_machines_building_auto_mining_support_2
	}
}
oxr_mdlc_world_machines_building_auto_mining_support_2 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_mining_boost
		BUILD_TIME = @b2_time
		COST = @b2_minerals
		COST_MOTES = @b2_rare_cost
		UPKEEP = 2
	}

	allow = {
		oxr_mdlc_has_upgraded_capital = yes
		NOR = {
			has_modifier = resort_colony
		}
	}
	inline_script = planet/buildings/auto/oxr_destroy

	prerequisites = {
		tech_mineral_purification_2
	}
}
# Mining resource building - new
oxr_mdlc_world_machines_auto_mine_1 = {
	can_build = yes  # for now
	inline_script = planet/buildings/oxr_sort_important
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_mining
		PRODUCES_MINERALS = 8
		BUILD_COST = @b0_minerals
		RARE_COST = 0
		UPKEEP = 0.5
		BUILD_TIME = @b0_time
		RARE_UPKEEP = 0
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_basic_industry"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_mine_2
	}
}
oxr_mdlc_world_machines_auto_mine_2 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_mining
		PRODUCES_MINERALS = 16
		BUILD_COST = @b1_minerals
		RARE_COST = 0
		UPKEEP = @b1_upkeep
		BUILD_TIME = @b1_time
		RARE_UPKEEP = 0
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_mining_1"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_mine_3
	}
}
oxr_mdlc_world_machines_auto_mine_3 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_mining
		PRODUCES_MINERALS = 24
		BUILD_COST = @b2_minerals
		RARE_COST = @b2_rare_cost
		UPKEEP = @b2_upkeep
		BUILD_TIME = @b2_time
		RARE_UPKEEP = @b2_rare_upkeep
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_mining_2"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_mine_4
	}
}
oxr_mdlc_world_machines_auto_mine_4 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_mining
		PRODUCES_MINERALS = 48  # 12 x 4
		BUILD_COST = @c6_minerals
		RARE_COST = @c6_rare_cost
		UPKEEP = @c6_upkeep
		BUILD_TIME = @c6_time
		RARE_UPKEEP = @c6_rare_upkeep
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_mining_3"
	}
	allow = {
		oxr_mdlc_has_upgraded_capital = yes
		# owner = {
			# has_ascension_perk = oxr_mdlc_ap_fractal_production_automation
		# }
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_mine_5
	}
	planet_modifier = {
		empire_size_add = 1
		planet_stability_add = -1
	}
}
oxr_mdlc_world_machines_auto_mine_5 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_mining
		PRODUCES_MINERALS = 80
		BUILD_COST = @c10_minerals
		RARE_COST = @c10_rare_cost
		UPKEEP = @c10_upkeep
		BUILD_TIME = @c10_time
		RARE_UPKEEP = @c10_rare_upkeep
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_mining_3"
		"tech_mineral_purification_2"
	}
	allow = {
		oxr_mdlc_has_upgraded_capital = yes
		# owner = {
			# has_ascension_perk = oxr_mdlc_ap_fractal_production_automation
		# }
	}
	planet_modifier = {
		empire_size_add = 2
		planet_stability_add = -2
	}
}
# ENERGY - "new" old building
oxr_mdlc_world_machines_auto_generator_1 = {
	can_build = yes
	inline_script = planet/buildings/oxr_sort_important
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_generator
		PRODUCES_ENERGY = 16
		BUILD_COST = @b0_minerals
		RARE_COST = 0
		UPKEEP = @b0_upkeep
		BUILD_TIME = @b0_time
		RARE_UPKEEP = 0
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_power_plant_1"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_generator_2
	}
}
oxr_mdlc_world_machines_auto_generator_2 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_generator
		PRODUCES_ENERGY = 32
		BUILD_COST = @b1_minerals
		RARE_COST = 0
		UPKEEP = @b1_upkeep
		BUILD_TIME = @b1_time
		RARE_UPKEEP = 0
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_power_plant_2"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_generator_3
	}
}
oxr_mdlc_world_machines_auto_generator_3 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_generator
		PRODUCES_ENERGY = 48
		BUILD_COST = @b2_minerals
		RARE_COST = @b2_rare_cost
		UPKEEP = @b2_upkeep
		BUILD_TIME = @b2_time
		RARE_UPKEEP = @b2_rare_upkeep
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_power_plant_3"
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_generator_4
	}
}
oxr_mdlc_world_machines_auto_generator_4 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_generator
		PRODUCES_ENERGY = 64
		BUILD_COST = @b3_minerals
		RARE_COST = @b3_rare_cost
		UPKEEP = @b3_upkeep
		BUILD_TIME = @b3_time
		RARE_UPKEEP = @b3_rare_upkeep
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_power_plant_4"
	}
	allow = {
		oxr_mdlc_has_upgraded_capital = yes
		# owner = {
			# has_ascension_perk = oxr_mdlc_ap_fractal_production_automation
		# }
	}
	upgrades = {
		oxr_mdlc_world_machines_auto_generator_5
	}
	planet_modifier = {
		empire_size_add = 1
		planet_stability_add = -1
	}
}
oxr_mdlc_world_machines_auto_generator_5 = {
	can_build = no
	# POTENTIAL
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	# RESOURCES & THE REST
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_generator
		PRODUCES_ENERGY = 80
		BUILD_COST = @b3_minerals
		RARE_COST = @b3_rare_cost
		UPKEEP = @b3_upkeep
		BUILD_TIME = @b3_time
		RARE_UPKEEP = @b3_rare_upkeep
	}
	inline_script = planet/buildings/auto/oxr_destroy
	prerequisites = {
		"tech_power_plant_4"
		"tech_power_hub_2"
	}
	allow = {
		oxr_mdlc_has_upgraded_capital = yes
		# owner = {
			# has_ascension_perk = oxr_mdlc_ap_fractal_production_automation
		# }
	}
	planet_modifier = {
		empire_size_add = 2
		planet_stability_add = -2
	}
}



# Replace building_food_processing_facility
oxr_mdlc_world_machines_building_auto_farm_logistics = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				is_ai = yes
				country_uses_food = no
			}
			is_planet_world_machine = no
			owner = {
				NOT = { has_technology = oxr_mdlc_tech_world_machines_unlocked }
			}
		}
	}
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_auto_farm_boost
		# AUTO_FARM_PRODUCES_ADD = 2
		PRODUCES = 10
		MINERALS_COST = @b1_minerals
		RARE_COST = 0
		UPKEEP = 2
		RARE_UPKEEP = @b2_rare_upkeep
		# RING_COST = 0
		# RING_RARE_COST = 0
	}

	upgrades = {
		oxr_mdlc_world_machines_building_auto_farm_logistics_2
	}
	prerequisites = {
		"tech_food_processing_1"
		"oxr_mdlc_tech_world_machines_unlocked"
	}

}
# T2
oxr_mdlc_world_machines_building_auto_farm_logistics_2 = {
	base_buildtime = @b2_time
	can_build = no
	
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto
	allow = {
		exists = owner
		has_upgraded_capital = yes
	}
	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_auto_farm_boost
		# AUTO_FARM_PRODUCES_ADD = 4
		PRODUCES = 10
		MINERALS_COST = @b2_minerals
		RARE_COST = @b2_rare_cost
		UPKEEP = 2
		RARE_UPKEEP = @b2_rare_upkeep
	}

	prerequisites = {
		"tech_food_processing_2"
	}
}

#### STRATEGIC ####
# Gases
oxr_mdlc_world_machines_building_welding_colony = {
	base_buildtime = @b2_time

	exempt_from_ai_planet_specialization = no
	category = manufacturing
	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	resources = {
		category = oxr_mdlc_world_machines_strategic_resource_buildings
		cost = {
			minerals = 500
		}
		upkeep = {
			energy = 3
			alloys = 2
		}
		produces = {
			exotic_gases = 3
		}
	}

	prerequisites = {
		"oxr_mdlc_tech_world_machines_unlocked"
		"tech_exotic_gases"
	}

}
# Motes
oxr_mdlc_world_machines_building_particle_collider = {
	base_buildtime = @b2_time

	exempt_from_ai_planet_specialization = no
	category = manufacturing
	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	resources = {
		category = oxr_mdlc_world_machines_strategic_resource_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = 7
		}
		produces = {
			volatile_motes = 3
			physics_research = 3
		}
	}

	prerequisites = {
		"oxr_mdlc_tech_world_machines_unlocked"
		"tech_volatile_motes"
	}

}
# Crystals
oxr_mdlc_world_machines_building_crystal_cultivation_tank = {
	base_buildtime = @b2_time

	exempt_from_ai_planet_specialization = no
	category = manufacturing
	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	resources = {
		category = oxr_mdlc_world_machines_strategic_resource_buildings
		cost = {
			minerals = @b2_minerals
			rare_crystals = 500
			alloys = 50
		}
		upkeep = {
			energy = 5
			minerals = 5
		}
		produces = {
			rare_crystals = 3
		}
	}
	upgrades = {
		xvcv_mdlc_world_machine_auto_food_processing_center
	}
	prerequisites = {
		"oxr_mdlc_tech_world_machines_unlocked"
		"tech_rare_crystals"
	}
}

xvcv_mdlc_world_machine_auto_food_processing_center = {
	base_buildtime = @b2_time
	can_build = no
	category = resource

	allow = {
		exists = owner
		has_upgraded_capital = yes
	}
	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	inline_script = planet/buildings/oxr_mdlc_wm_auto

	destroy_trigger = {
		OR = {
			AND = {
				exists = owner
				OR = {
					owner = {
						is_ai = yes
						country_uses_food = no
					}
					AND = {
						owner = {
							is_ai = yes
						}
						has_any_farming_district_or_buildings = no
					}
				}
			}
			has_modifier = resort_colony
			# has_modifier = crucible_colony
		}
	}

	planet_modifier = {
		planet_farmers_food_produces_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			has_ringworld_output_boost = yes
		}
		modifier = {
			planet_farmers_food_produces_add = 2
		}
	}

	resources = {
		category = oxr_mdlc_world_machines_food_buildings
		cost = {
			trigger = {
				has_ringworld_output_boost = no
			}
			minerals = @b2_minerals
			volatile_motes = @b2_rare_cost
		}
		cost = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			minerals = 900
			volatile_motes = 200
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = no
			}
			energy = 2
			volatile_motes = @b2_rare_upkeep
		}
		upkeep = {
			trigger = {
				has_ringworld_output_boost = yes
			}
			energy = 5
			volatile_motes = 3
		}
	}

	prerequisites = {
		"oxr_mdlc_tech_world_machines_unlocked"
	}

}

 # Convert biomass to minerals by burning them ?
# oxr_mdlc_world_machines_building_bio_furnace = {}


#### UNITY ####

# UNITY T1
oxr_mdlc_world_machines_building_auto_unity_1 = {
	base_buildtime = @b1_time
	can_build = yes

	exempt_from_ai_planet_specialization = no

	category = unity
	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_bureaucratic_1
		building_temple
		building_hive_node
	}

	resources = {
		category = oxr_mdlc_world_machines_unity_buildings  # could also be planet_administrators
		cost = {
			minerals = @b1_minerals  # 400
		}
		upkeep = {
			energy = 8 #@b1_upkeep
		}
		produces = { unity = 8 }
	}

	upgrades = {
		"oxr_mdlc_world_machines_building_auto_unity_2"
	}

	prerequisites = {
		"tech_planetary_government"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
}
# UNITY T2
oxr_mdlc_world_machines_building_auto_unity_2 = {
	base_buildtime = @b2_time
	can_build = no

	category = unity

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	# allow = {
	# 	has_upgraded_capital = yes
	# }

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_bureaucratic_2
		building_holotemple
		building_hive_cluster
	}

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_unity
		# BUILD_RESOURCE = minerals
		BUILD_COST = @b2_minerals
		# RARE_BUILD_RESOURCE = rare_crystals
		RARE_BUILD_COST = @b2_rare_cost
		UPKEEP_COST = @b2_upkeep
		# UPKEEP_RARE_RESOURCE = rare_crystals
		UPKEEP_RARE_COST = @b2_rare_upkeep
		PRODUCES_AMOUNT = 16
	}

	prerequisites = {
		"tech_colonial_bureaucracy"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	upgrades = {
		"oxr_mdlc_world_machines_building_auto_unity_3"
	}
}
# UNITY T3
oxr_mdlc_world_machines_building_auto_unity_3 = {
	base_buildtime = @b3_time
	can_build = no

	category = unity

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	allow = {
		oxr_mdlc_has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_bureaucratic_3
		building_holotemple
		building_hive_cluster
	}

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_unity
		# BUILD_RESOURCE = minerals
		BUILD_COST = @b3_minerals
		# RARE_BUILD_RESOURCE = rare_crystals
		RARE_BUILD_COST = @b3_rare_cost
		UPKEEP_COST = @b3_upkeep
		# UPKEEP_RARE_RESOURCE = rare_crystals
		UPKEEP_RARE_COST = @b3_rare_upkeep
		PRODUCES_AMOUNT = 24
	}

	prerequisites = {
		"tech_colonial_bureaucracy"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
	upgrades = {
		"oxr_mdlc_world_machines_building_auto_unity_4"
	}
}
# UNITY T4
oxr_mdlc_world_machines_building_auto_unity_4 = {
	base_buildtime = @b4_time
	can_build = no

	category = unity

	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	allow = {
		oxr_mdlc_has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_bureaucratic_3
		building_holotemple
		building_hive_cluster
	}

	inline_script = {
		script = planet/buildings/auto/oxr_mdlc_unity
		# BUILD_RESOURCE = minerals
		BUILD_COST = @b4_minerals
		# RARE_BUILD_RESOURCE = rare_crystals
		RARE_BUILD_COST = @b4_rare_cost
		UPKEEP_COST = @b4_upkeep
		# UPKEEP_RARE_RESOURCE = rare_crystals
		UPKEEP_RARE_COST = @b4_rare_upkeep
		PRODUCES_AMOUNT = 32
	}

	prerequisites = {
		"tech_colonial_bureaucracy"
		"oxr_mdlc_tech_world_machines_unlocked"
	}
}


#### UNIQUE ####
oxr_mdlc_world_machines_building_storage_cradle = {
	base_buildtime = @b3_time
	category = resource

	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	resources = {
		category = oxr_mdlc_category_world_machines_buildings
		cost = {
			alloys = 1000
		}
		upkeep = {
			physics_research = 1
		}
		produces = {
			energy = 3
		}
	}

	country_modifier = {
		country_resource_max_oxr_mdlc_world_machine_core_add = 3
	}
	planet_modifier = {
		planet_max_districts_add = -0.5
	}

	prerequisites = {
		"oxr_mdlc_tech_world_machines_unlocked"
		"oxr_mdlc_tech_world_machine_wmc_core"
	}
	on_destroy = {
		owner = {
			oxr_mdlc_country_world_machine_cores_recalc_amount = yes
		}
	}
	on_repaired = {
		owner = {
			oxr_mdlc_country_world_machine_cores_recalc_amount = yes
		}
	}

}

oxr_mdlc_world_machines_building_core_fabrication_depot = {
	base_buildtime = @b3_time
	category = manufacturing
	inline_script = planet/buildings/oxr_sort_important
	inline_script = planet/buildings/auto/oxr_mdlc_wm_auto

	resources = {
		category = oxr_mdlc_category_world_machines_buildings
		cost = {
			alloys = 3000
			minerals = 4000
		}
		upkeep = {
			physics_research = 1
			energy = 10
		}
		produces = {
			energy = 3
		}
		upkeep = {
			trigger = {
				has_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
			}
			energy = @oxr_mdlc_modifier_wmc_fabrication_monthly_energy
			alloys = @oxr_mdlc_modifier_wmc_fabrication_monthly_alloys
			physics_research = 2
		}
	}
	prerequisites = {
		"oxr_mdlc_tech_world_machine_wmc_core"
	}
}

oxr_mdlc_decisions_origin_wm_start_world_with_core = {
	# owned_planets_only = yes

	# enactment_time = 60
	potential = {
		exists = space_owner
		space_owner = {
			has_origin = oxr_mdlc_origin_world_machine_awakened
		}
		is_planet_world_machine = no
		oxr_mdlc_planet_can_become_world_machine = yes
	}
	allow = {
		always = yes
		is_terraforming = no
		space_owner = {
			has_resource = {
				type = oxr_mdlc_world_machine_core amount >= 1
			}
		}
	}
	resources = {
		category = decisions
		cost = {
			# oxr_mdlc_world_machine_core = 1
			energy = 2500
		}
	}
	effect = {
		start_terraform_process = xvcv_mdlc_pc_machine_auto
	}
}
oxr_mdlc_decisions_origin_wm_reboot_ruined_world = {
	owned_planets_only = no
	potential = {
		exists = space_owner
		space_owner = { has_origin = oxr_mdlc_origin_world_machine_awakened }
		is_planet_class = xvcv_mdlc_pc_machine_auto_ruined
	}
	allow = {
		always = yes
		is_terraforming = no
		space_owner = {
			has_resource = {
				type = energy amount >= 5000
			}
			NOT = {
				any_situation = {
					is_situation_type = oxr_mdlc_origin_wm_situation_restore_ruined_world_machine
				}
			}
		}
	}
	resources = {
		category = decisions
		cost = {
			energy = 5000
		}
	}
	effect = {
		save_global_event_target_as = oxr_mdlc_ruined_world_machine
		log = "Ruined WM target set to \\[event_target:oxr_mdlc_ruined_world_machine.GetName]"
		space_owner = {
			start_situation = {
				type = oxr_mdlc_origin_wm_situation_restore_ruined_world_machine
				# target = oxr_mdlc_ruined_world_machine
				target = event_target:oxr_mdlc_ruined_world_machine
				# target = owner
				effect = {
					set_situation_approach = oxr_mdlc_origin_wm_situation_restore_ruined_world_machine_approach_pause
				}
			}
			# Starting event screen
			country_event = {
				id = oxr_mdlc_origin_wm_main.1000
			}
		}
		
	}
}

oxr_mdlc_decisions_origin_wm_manufacture_core = {
	owned_planets_only = yes
	# enactment_time = @oxr_mdlc_world_machine_core_build_time_days  # 1080
	enactment_time = 15
	resources = {
		category = decisions
		cost = {
			energy = @oxr_mdlc_world_machine_core_build_cost_energy  # 5000
			alloys = @oxr_mdlc_world_machine_core_build_cost_alloys  # 1500
		}
		# upkeep = {
		# 	energy = 50
		# 	physics_research = 3
		# }
	}
	potential = {
		exists = space_owner
		space_owner = {
			has_origin = oxr_mdlc_origin_world_machine_awakened
			has_technology = oxr_mdlc_tech_world_machine_wmc_core
			NOT = {
				has_country_flag = oxr_mdlc_world_machine_tech_stolen
			}
		}
		is_planet_world_machine = yes
		NOT = {
			has_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
		}
	}
	allow = {
		has_building = oxr_mdlc_world_machines_building_core_fabrication_depot
		space_owner = {
			has_resource = {
				type = alloys
				amount >= @oxr_mdlc_world_machine_core_build_cost_alloys
			}
			has_resource = {
				type = energy
				amount >= @oxr_mdlc_world_machine_core_build_cost_energy
			}
		}
		oxr_mdlc_planet_has_room_for_more_cores = yes
		NOR = {
			has_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
			has_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_on_standby
		}
	}
	effect = {
		custom_tooltip = "oxr_mdlc_decisions_origin_wm_manufacture_core.tooltip"
		hidden_effect = {
			planet_event = {
				id = oxr_mdlc_origin_wm_main.1300
			}
		}
	}
}

oxr_mdlc_decisions_origin_wm_manufacture_core_stop = {
	owned_planets_only = yes
	enactment_time = 15  # 1080
	resources = {
		category = decisions
		cost = { }
	}
	potential = {
		exists = space_owner
		space_owner = {
			has_origin = oxr_mdlc_origin_world_machine_awakened
			has_technology = oxr_mdlc_tech_world_machine_wmc_core
			NOT = {
				has_country_flag = oxr_mdlc_world_machine_tech_stolen
			}
		}
		is_planet_world_machine = yes
		has_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
	}
	allow = {
		# has_building = oxr_mdlc_world_machines_building_core_fabrication_depot
		# has_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
		always = yes
	}
	effect = {
		# custom_tooltip = "oxr_mdlc_decisions_origin_wm_manufacture_core_stop.tooltip"
		hidden_effect = {
			remove_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
		}
		
	}
}


oxr_mdlc_decisions_origin_wm_restock_armies = {
	owned_planets_only = yes
	enactment_time = value:oxr_mdlc_planet_calculate_army_refill_time
	resources = {
		category = decisions
		cost = {
			energy = value:oxr_mdlc_planet_calculate_army_refill_cost
		}
	}
	potential = {
		exists = space_owner
		space_owner = {
			has_origin = oxr_mdlc_origin_world_machine_awakened
		}
		is_planet_world_machine = yes
		
	}
	allow = {
		oxr_mdlc_planet_can_refill_district_defense_armies = yes
		has_ground_combat = no
	}
	effect = {
		custom_tooltip = oxr_mdlc_decisions_origin_wm_restock_armies_effect
		hidden_effect = {
			oxr_mdlc_origin_world_machine_refill_armies = yes
		}
	}
}

# oxr_mdlc_decisions_origin_wm_power_on_fabricator = {
# 	owned_planets_only = yes
# 	enactment_time = 15  # 1080
# 	resources = {
# 		category = decisions
# 		cost = { }
# 	}
# 	potential = {
# 		exists = space_owner
# 		space_owner = {
# 			has_origin = oxr_mdlc_origin_world_machine_awakened
# 			has_technology = oxr_mdlc_tech_world_machine_wmc_core
# 			NOT = {
# 				has_country_flag = oxr_mdlc_world_machine_tech_stolen
# 			}
# 		}
# 		is_planet_world_machine = yes
# 		has_building = oxr_mdlc_world_machines_building_core_fabrication_depot
# 	}
# 	allow = {
# 		space_owner = {
# 			has_resource = {
# 				type = alloys
# 				amount >= @oxr_mdlc_world_machine_core_build_cost_alloys
# 			}
# 			has_resource = {
# 				type = energy
# 				amount >= @oxr_mdlc_world_machine_core_build_cost_energy
# 			}
# 		}
# 		oxr_mdlc_planet_has_room_for_more_cores = yes
# 		NOR = {
# 			has_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
# 		}

# 	}
# 	effect = {
# 		add_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
# 	}
# }

# oxr_mdlc_decisions_origin_wm_power_off_fabricator = {
# 	owned_planets_only = yes
# 	enactment_time = 15  # 1080
# 	resources = {
# 		category = decisions
# 		cost = { }
# 	}
# 	potential = {
# 		exists = space_owner
# 		space_owner = {
# 			has_origin = oxr_mdlc_origin_world_machine_awakened
# 			has_technology = oxr_mdlc_tech_world_machine_wmc_core
# 			NOT = {
# 				has_country_flag = oxr_mdlc_world_machine_tech_stolen
# 			}
# 		}
# 		is_planet_world_machine = yes
# 		has_building = oxr_mdlc_world_machines_building_core_fabrication_depot
# 	}
# 	allow = {
# 		space_owner = {
# 			has_resource = {
# 				type = alloys
# 				amount >= @oxr_mdlc_world_machine_core_build_cost_alloys
# 			}
# 			has_resource = {
# 				type = energy
# 				amount >= @oxr_mdlc_world_machine_core_build_cost_energy
# 			}
# 		}
# 		oxr_mdlc_planet_has_room_for_more_cores = yes
# 		NOR = {
# 			has_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
# 		}
# 	}
# 	effect = {
# 		add_modifier = oxr_mdlc_origin_world_machine_core_manufacturing_in_progress
# 	}
# }

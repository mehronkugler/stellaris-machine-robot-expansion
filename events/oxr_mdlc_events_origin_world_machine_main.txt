namespace = oxr_mdlc_origin_wm_main

country_event = {
	id = oxr_mdlc_origin_wm_main.1
	title = oxr_mdlc_origin_wm_starting_overview
	desc = oxr_mdlc_origin_wm_starting_overview_desc
	picture = GFX_evt_ai_planet
	is_triggered_only = yes

	option = {
		name = oxr_mdlc_origin_wm_main.1.a.name
	}
}

# Trigger project to get proficiency tech
# although I am on the fence and maybe just award it
country_event = {
	id = oxr_mdlc_origin_wm_main.50
	title = oxr_mdlc_origin_wm_main.50.title
	desc = oxr_mdlc_origin_wm_main.50.desc
	picture = GFX_evt_engineering_research
	is_triggered_only = yes

	trigger = {
		
	}

	option = {
		name = oxr_mdlc_origin_wm_main.50.a
		owner = {
			enable_special_project = {
				name = OXR_MDLC_ORIGIN_WM_TECH_PROFICIENCY
			}
		}
	}
	immediate = {
		owner = {
			end_event_chain = oxr_mdlc_origin_wm_chain_clear_blockers
		}
	}
	# option = {
	# 	name = oxr_mdlc_origin_wm_main.50.b
	# 	allow = {
	# 		owner = {
	# 			has_resource = {
	# 				type = energy
	# 				amount >= 1000
	# 			}
	# 		}
	# 	}
	# 	owner = {
	# 		add_resource = {
	# 			energy = -1000
	# 		}
	# 		give_technology = {
	# 			tech = oxr_mdlc_tech_world_machine_planetary_proficiency
	# 			message = no
	# 		}
	# 	}
	# }
}

# Planet has been terraformed
# This = Planet
# From = Terraforming country
planet_event = {
	id = oxr_mdlc_origin_wm_main.500
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = {
			has_origin = oxr_mdlc_origin_world_machine_awakened
		}
	}

	immediate = {
		create_colony = {
			owner = from
			species = from.owner_species
		}
		add_deposit = oxr_mdlc_d_world_machine_core
		if = {
			limit = {
				from = {
					NOT = {
						has_technology = oxr_mdlc_tech_world_machine_planetary_mastery
					}
				}
			}
			oxr_mdlc_origin_world_machine_random_add_all_blockers = yes
			oxr_mdlc_origin_world_machine_create_digsite_for_blocker = yes
		}
		add_modifier = { modifier = "planet_population_control_gestalt" days = -1 }
		from = {
			oxr_mdlc_world_machine_cores_recalc_amount = yes
		}
	}
}